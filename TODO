Add input filter
Add some test
Windows support again
Support getting thread id for mac

